!function(n,t,o,i){"use strict";var e=function(t,o){this.$element=t,this.defaults={isScroll:!1,bg_color:"rgba(0,0,0,0.5)",form_padding_top:"30%",animate_in:0,animate_out:0,close_mode:1,close_tag:i,show_pre_func:i,show_pre_param:i,show_after_func:i,show_after_param:i,hide_pre_func:i,hide_pre_param:i,hide_after_func:i,hide_after_param:i,ok_btn:".jpub-btn-ok",cancel_btn:".jpub-btn-cancel",ok_func:a.testFunc,ok_func_param:i},t instanceof jQuery&&(this.form_info={$w:t.width(),$h:t.height()}),this.defaults_2={tag_id:"jpub_auto_form",parent_tag:"body",ok_text:"OK",cancel_text:"Cancel",content:"Information you want to show"},this.options=n.extend({},this.defaults,o),this.options_2=n.extend({},this.defaults_2,o)};e.prototype={show:function(){return a.showPreFunc(this),a.showBgDiv(this),a.showForm(this),this},create:function(){var t='    <div class="jpub-target jpub-div" id='+this.options_2.tag_id+">";return t+='        <div class="jpub-main-head"><p class="jpub-main-head-p">Notice</p></div>',t+='        <div class="jpub-main-body">'+this.options_2.content+"</div>",t+='        <div class="jpub-main-foot">',t+='            <button class="jpub-btn jpub-btn-cancel">'+this.options_2.cancel_text+"</button>",t+='            <button class="jpub-btn jpub-btn-ok">'+this.options_2.ok_text+"</button>",t+="        </div>",t+="    </div>",n(this.options_2.parent_tag).append(t),n(this.options_2.parent_tag)}};var a={testFunc:function(){alert("Please bind functions by adding options:'ok_func',cancel_func' ")},showBgDiv:function(t){var o='<div id="jpub-bg">';o+="</div>",o+='<button class="jpub-close-span">Close</button>',n("html>body:eq(0)").append(o);var i=n("#jpub-bg");switch(i.addClass("jpub-bg"),i.css({"background-color":t.options.bg_color}),t.options.close_mode){case 1:s.bindHideTag(t,"#jpub-bg");break;case 2:s.bindHideTag(t,".jpub-close-span");break;case 3:s.bindHideTag(t,t.options.close_tag)}return s.bindBtn(t),s.isScroll(t),i.fadeIn(),t},hide:function(n,t,o,i,e){return s.animateOut(n,t,o,i,e),t},showForm:function(n){var t=this;return n.$element.addClass("jpub-form"),s.animateIn(n,n.$element,n.options.animate_in,t.showAfterFunc),n},showPreFunc:function(n){var t=n.options.show_pre_func;"function"==typeof t&&t(n.options.show_pre_param)},showAfterFunc:function(n){var t=n.options.show_after_func;"function"==typeof t&&t(n.options.show_after_param)},hidePreFunc:function(n){var t=n.options.hide_pre_func;"function"==typeof t&&t(n.options.hide_pre_param)},hideAfterFunc:function(n){var t=n.options.hide_after_func;"function"==typeof t&&t(n.options.hide_after_param)}},s={animateIn:function(t,i,e,a){var s="";switch(i.removeClass("anime-out-0"),i.css({display:"block"}),e){case 0:i.css({top:t.options.form_padding_top}),i.addClass("anime-in-0"),this.animateEndOnce(i,function(){a(t)});break;case 1:i.addClass("jpub-center1"),i.css({top:"-100%"}),i.animate({top:t.options.form_padding_top},function(){a(t)});break;case 2:i.css({top:t.options.form_padding_top,left:n(o).width()}),s=n(o).width()/2-i.width()/2,i.animate({left:s},function(){a(t)});break;case 3:i.addClass("jpub-center1"),i.css({top:"100%"}),i.animate({top:t.options.form_padding_top},function(){a(t)});break;case 4:i.css({top:t.options.form_padding_top,left:"-100%"}),s=n(o).width()/2-i.width()/2,i.animate({left:s},function(){a(t)});break;default:i.css({top:t.options.form_padding_top,left:"-100%"}),i.addClass("jpub-center1"),i.fadeIn(function(){a(t)})}},animateOut:function(t,e,a,s,c){n(o).width();switch(e.removeClass("anime-in-0"),a){case 0:e.addClass("anime-out-0"),this.animateEndOnce(e,function(){e.hide();var n=s===!0?e.remove():"";n=c===i?"":c(t)});break;case 1:e.animate({top:"-110%"},function(){var n=s===!0?e.remove():"";n=c===i?"":c(t)});break;case 2:e.animate({left:"110%"},function(){var n=s===!0?e.remove():"";n=c===i?"":c(t)});break;case 3:e.animate({top:"110%"},function(){var n=s===!0?e.remove():"";n=c===i?"":c(t)});break;case 4:e.animate({left:"-110%"},function(){var n=s===!0?e.remove():"";n=c===i?"":c(t)});break;default:e.fadeOut(function(){var n=s===!0?e.remove():"";n=c===i?"":c(t)})}},bindBtn:function(t){t.options.ok_btn!==i&&n(t.options.ok_btn).one("click",function(){t.options.ok_func(t.options.ok_func_param)}),t.options.cancel_btn!==i&&s.bindHideTag(t,t.options.cancel_btn)},bindHideTag:function(t,o){".jpub-close-span"!=o&&n(".jpub-close-span").remove(),n(o).one("click",function(){a.hidePreFunc(t),a.hide(t,t.$element,t.options.animate_out,!1,a.hideAfterFunc),a.hide(t,n("#jpub-bg"),i,!0),s.unBindScroll(t),n(this).unbind(),".jpub-close-span"==o&&a.hide(t,n(this),i,!0),s.unbindBtn(t)})},unbindBtn:function(t){t.options.ok_btn!==i&&n(t.options.ok_btn).unbind(),t.options.cancel_btn!==i&&n(t.options.cancel_btn).unbind()},isScroll:function(t){t.options.isScroll===!1&&n("body").bind("touchmove",function(n){n.preventDefault()})},unBindScroll:function(t){n("body").unbind("touchmove")},animateEndOnce:function(n,t){n.one("animationend webkitAnimationEnd oAnimationEnd msAnimationEnd mozAnimationEnd",t)}};n.fn.jShow=function(n){var t=new e(this,n);return t.show()},n.extend({jCreateForm:function(n){var t=new e(this,n);return t.create()}})}(jQuery,window,document);