!function(t,n,o,i){"use strict";var e=function(n,o){this.$element=n,this.defaults={isScroll:!1,bg_color:"rgba(0,0,0,0.5)",form_padding_top:"30%",animate_in:0,animate_out:0,close_mode:1,close_tag:i,show_pre_func:i,show_pre_param:i,show_after_func:i,show_after_param:i,hide_pre_func:i,hide_pre_param:i,hide_after_func:i,hide_after_param:i,ok_btn:".jpub-btn-ok",cancel_btn:".jpub-btn-cancel",ok_func:a.testFunc,cancel_func:a.testFunc,ok_btn_param:i,cancel_btn_param:i},n instanceof jQuery&&(this.form_info={$w:n.width(),$h:n.height()}),this.defaults_2={tag_id:"jpub_auto_form",parent_tag:"body",ok_text:"Ok",cancel_text:"Cancel",content:"Information you want to show"},this.options=t.extend({},this.defaults,o),this.options_2=t.extend({},this.defaults_2,o)};e.prototype={show:function(){return a.show_pre_func(this),a.showBgDiv(this),a.showForm(this),this},create:function(){var n='    <div class="jpub-target jpub-div" id='+this.options_2.tag_id+">";return n+='        <div class="jpub-main-head"></div>',n+='        <div class="jpub-main-body">'+this.options_2.content+"</div>",n+='        <div class="jpub-main-foot">',n+='            <button class="jpub-btn jpub-btn-cancel">'+this.options_2.cancel_text+"</button>",n+='            <button class="jpub-btn jpub-btn-ok">'+this.options_2.ok_text+"</button>",n+="        </div>",n+="    </div>",t(this.options_2.parent_tag).append(n),t(this.options_2.parent_tag)}};var a={testFunc:function(){alert("Please bind functions by adding options:'ok_func',cancel_func' ")},showBgDiv:function(n){var o=this,i='<div id="jpub-bg">';i+="</div>",i+='<button class="jpub-close-span">Close</button>',t("html>body:eq(0)").append(i);var e=t("#jpub-bg");switch(e.addClass("jpub-bg"),e.css({"background-color":n.options.bg_color}),n.options.close_mode){case 1:o.bindHideTag(n,"#jpub-bg");break;case 2:o.bindHideTag(n,".jpub-close-span");break;case 3:o.bindHideTag(n,n.options.close_tag)}return o.bindBtn(n),o.isScroll(n),e.fadeIn(),n},hide:function(t,n,o,i,e){return this.animate_out(t,n,o,i,e),n},showForm:function(t){var n=this;return t.$element.addClass("jpub-form"),n.animate_in(t,t.$element,t.options.animate_in,n.show_after_func),t},bindBtn:function(n){var o=this;n.options.ok_btn!==i&&t(n.options.ok_btn).click(function(){n.options.ok_func(n.options.ok_btn_param)}),n.options.cancel_btn!==i&&o.bindHideTag(n,n.options.cancel_btn)},bindHideTag:function(n,o){var e=this;".jpub-close-span"!=o&&t(".jpub-close-span").remove(),t(o).click(function(){e.hide_pre_func(n),e.hide(n,n.$element,n.options.animate_out,!1,e.hide_after_func),e.hide(n,t("#jpub-bg"),i,!0),e.unBindScroll(n),t(this).unbind(),".jpub-close-span"==o&&e.hide(n,t(this),i,!0),e.unbindBtn(n)})},unbindBtn:function(n){n.options.ok_btn!==i&&t(n.options.ok_btn).unbind(),n.options.cancel_btn!==i&&t(n.options.cancel_btn).unbind()},isScroll:function(n){n.options.isScroll===!1&&t("body").bind("touchmove",function(t){t.preventDefault()})},unBindScroll:function(n){t("body").unbind("touchmove")},animate_in:function(n,i,e,a){var s="";switch(i.css({display:"block"}),e){case 0:i.addClass("jpub-center1"),i.css({top:n.options.form_padding_top,width:0,height:0}),i.animate({width:n.form_info.$w,height:n.form_info.$h},function(){a(n)});break;case 1:i.addClass("jpub-center1"),i.css({top:"-100%"}),i.animate({top:n.options.form_padding_top},function(){a(n)});break;case 2:i.css({top:n.options.form_padding_top,left:t(o).width()}),s=t(o).width()/2-i.width()/2,i.animate({left:s},function(){a(n)});break;case 3:i.addClass("jpub-center1"),i.css({top:"100%"}),i.animate({top:n.options.form_padding_top},function(){a(n)});break;case 4:i.css({top:n.options.form_padding_top,left:"-100%"}),s=t(o).width()/2-i.width()/2,i.animate({left:s},function(){a(n)});break;default:i.css({top:n.options.form_padding_top,left:"-100%"}),i.addClass("jpub-center1"),i.fadeIn(function(){a(n)})}},animate_out:function(n,e,a,s,c){t(o).width();switch(a){case 0:e.animate({width:"0",height:"0"},function(){e.hide(),e.css({width:n.form_info.$w,height:n.form_info.$h});var t=s===!0?e.remove():"";t=c===i?"":c(n)});break;case 1:e.animate({top:"-110%"},function(){var t=s===!0?e.remove():"";t=c===i?"":c(n)});break;case 2:e.animate({left:"110%"},function(){var t=s===!0?e.remove():"";t=c===i?"":c(n)});break;case 3:e.animate({top:"110%"},function(){var t=s===!0?e.remove():"";t=c===i?"":c(n)});break;case 4:e.animate({left:"-110%"},function(){var t=s===!0?e.remove():"";t=c===i?"":c(n)});break;default:e.fadeOut(function(){var t=s===!0?e.remove():"";t=c===i?"":c(n)})}},show_pre_func:function(t){var n=t.options.show_pre_func;"function"==typeof n&&n(t.options.show_pre_param)},show_after_func:function(t){var n=t.options.show_after_func;"function"==typeof n&&n(t.options.show_after_param)},hide_pre_func:function(t){var n=t.options.hide_pre_func;"function"==typeof n&&n(t.options.hide_pre_param)},hide_after_func:function(t){var n=t.options.hide_after_func;"function"==typeof n&&n(t.options.hide_after_param)}};t.fn.jShow=function(t){var n=new e(this,t);return n.show()},t.extend({jCreateForm:function(t){var n=new e(this,t);return n.create()}})}(jQuery,window,document);