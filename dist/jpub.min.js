!function(n,t,o,e){"use strict";var i=function(t,o){this.$element=t,this.defaults={isScroll:!1,bg_color:"rgba(0,0,0,0.5)",form_padding_top:"30%",animate_in:0,animate_out:0,close_mode:1,close_tag:e,show_pre_func:e,show_pre_param:e,show_after_func:e,show_after_param:e,hide_pre_func:e,hide_pre_param:e,hide_after_func:e,hide_after_param:e,ok_btn:".jpub-btn-ok",cancel_btn:".jpub-btn-cancel",ok_func:a.testFunc,cancel_func:a.testFunc,ok_btn_param:e,cancel_btn_param:e},t instanceof jQuery&&(this.form_info={$w:t.width(),$h:t.height()}),this.defaults_2={tag_id:"jpub_auto_form",parent_tag:"body"},this.options=n.extend({},this.defaults,o),this.options_2=n.extend({},this.defaults_2,o)};i.prototype={show:function(){return a.show_pre_func(this),a.showBgDiv(this),a.showForm(this),this},create:function(){var t='    <div class="jpub-target jpub-div" id='+this.options_2.tag_id+">";return t+='        <div class="jpub-main-head"></div>',t+='        <div class="jpub-main-body"></div>',t+='        <div class="jpub-main-foot">',t+='            <button class="jpub-btn jpub-btn-cancel">取消</button>',t+='            <button class="jpub-btn jpub-btn-ok">确认</button>',t+="        </div>",t+="    </div>",n(this.options_2.parent_tag).append(t),n(this.options_2.parent_tag)}};var a={testFunc:function(){alert("Please bind functions by adding options:'ok_func',cancel_func' ")},showBgDiv:function(t){var o=this,e='<div id="jpub-bg">';e+="</div>",e+='<button class="jpub-close-span">Close</button>',n("html>body:eq(0)").append(e);var i=n("#jpub-bg");switch(i.addClass("jpub-bg"),i.css({"background-color":t.options.bg_color}),t.options.close_mode){case 1:o.bindHideTag(t,"#jpub-bg");break;case 2:o.bindHideTag(t,".jpub-close-span");break;case 3:o.bindHideTag(t,t.options.close_tag)}return o.bindBtn(t),o.isScroll(t),i.fadeIn(),t},hide:function(n,t,o,e,i){return this.animate_out(n,t,o,e,i),t},showForm:function(n){var t=this;return n.$element.css({display:"block",position:"fixed",top:"100%",left:"0","z-index":2014}),t.animate_in(n,n.$element,n.options.animate_in,t.show_after_func),n},bindHideTag:function(t,o){var i=this;".jpub-close-span"!=o&&n(".jpub-close-span").remove(),n(o).click(function(){i.hide_pre_func(t),i.hide(t,t.$element,t.options.animate_out,!1,i.hide_after_func),i.hide(t,n("#jpub-bg"),e,!0),i.unBindScroll(t),n(this).unbind(),".jpub-close-span"==o&&i.hide(t,n(this),e,!0),i.unbindBtn(t)})},bindBtn:function(t){var o=this;t.options.ok_btn!==e&&n(t.options.ok_btn).click(function(){t.options.ok_func(t.options.ok_btn_param)}),t.options.cancel_btn!==e&&o.bindHideTag(t,t.options.cancel_btn)},unbindBtn:function(t){t.options.ok_btn!==e&&n(t.options.ok_btn).unbind(),t.options.cancel_btn!==e&&n(t.options.cancel_btn).unbind()},isScroll:function(t){t.options.isScroll===!1&&n("body").bind("touchmove",function(n){n.preventDefault()})},unBindScroll:function(t){n("body").unbind("touchmove")},animate_in:function(n,t,o,e){switch(o){case 0:t.addClass("jpub-center1"),t.css({top:n.options.form_padding_top,width:0,height:0}),t.animate({width:n.form_info.$w,height:n.form_info.$h},function(){e(n)});break;case 1:t.addClass("jpub-center1"),t.css({top:"-100%"}),t.animate({top:n.options.form_padding_top},function(){e(n)});break;case 2:t.addClass("jpub-center2"),t.css({top:n.options.form_padding_top,left:"100%"}),t.animate({left:"50%"},function(){e(n)});break;case 3:t.addClass("jpub-center1"),t.css({top:"100%"}),t.animate({top:n.options.form_padding_top},function(){e(n)});break;case 4:t.addClass("jpub-center2"),t.css({top:n.options.form_padding_top,left:"-100%"}),t.animate({left:"50%"},function(){e(n)});break;default:t.css({top:n.options.form_padding_top,left:"-100%"}),t.addClass("jpub-center1"),t.fadeIn(function(){e(n)})}},animate_out:function(n,t,o,i,a){switch(o){case 0:t.animate({width:"0",height:"0"},function(){t.hide(),t.css({width:n.form_info.$w,height:n.form_info.$h});var o=i===!0?t.remove():"";o=a===e?"":a(n)});break;case 1:t.animate({top:"-100%"},function(){var o=i===!0?t.remove():"";o=a===e?"":a(n)});break;case 2:t.animate({left:"100%"},function(){var o=i===!0?t.remove():"";o=a===e?"":a(n)});break;case 3:t.animate({top:"100%"},function(){var o=i===!0?t.remove():"";o=a===e?"":a(n)});break;case 4:t.animate({left:"-100%"},function(){var o=i===!0?t.remove():"";o=a===e?"":a(n)});break;default:t.fadeOut(function(){var o=i===!0?t.remove():"";o=a===e?"":a(n)})}},show_pre_func:function(n){var t=n.options.show_pre_func;"function"==typeof t&&t(n.options.show_pre_param)},show_after_func:function(n){var t=n.options.show_after_func;"function"==typeof t&&t(n.options.show_after_param)},hide_pre_func:function(n){var t=n.options.hide_pre_func;"function"==typeof t&&t(n.options.hide_pre_param)},hide_after_func:function(n){var t=n.options.hide_after_func;"function"==typeof t&&t(n.options.hide_after_param)}};n.fn.jShow=function(n){var t=new i(this,n);return t.show()},n.extend({jCreateForm:function(n){var t=new i(this,n);return t.create()}})}(jQuery,window,document);